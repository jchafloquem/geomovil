<ion-content>
  <ng-container *ngIf="registerDataService.formData$ | async as formData">
    <ion-card>
      <ion-card-header>
        <ion-card-title color="white">Datos del Productor</ion-card-title>
        <ion-card-subtitle color="white">Fuente: LEVANTAMIENTO EN CAMPO</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-list lines="none">
          <ion-item>
            <ion-input label="DNI" label-placement="stacked" type="tel" maxlength="8"
                       [ngModel]="formData.dni"
                       (ngModelChange)="formData.dni = $event"></ion-input>
            <ion-button slot="end" (click)="searchDni()" [disabled]="!formData.dni || formData.dni.length !== 8">
              <ion-icon name="search" slot="icon-only"></ion-icon>
            </ion-button>
          </ion-item>

          <ion-item>
            <ion-input label="Nombres" label-placement="stacked"
                       [ngModel]="formData.nombres"
                       (ngModelChange)="formData.nombres = $event"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input label="Apellido Paterno" label-placement="stacked"
                       [ngModel]="formData.apellido_paterno"
                       (ngModelChange)="formData.apellido_paterno = $event"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input label="Apellido Materno" label-placement="stacked"
                       [ngModel]="formData.apellido_materno"
                       (ngModelChange)="formData.apellido_materno = $event"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input label="Fecha de Nacimiento" label-placement="stacked" type="date"
                       [ngModel]="formData.fecha_nacimiento"
                       (ngModelChange)="formData.fecha_nacimiento = $event"></ion-input>
          </ion-item>

          <ion-item>
            <ion-input label="Celular" label-placement="stacked" type="tel"
                       [ngModel]="formData.celular_participante"
                       (ngModelChange)="formData.celular_participante = $event"></ion-input>
          </ion-item>

          <ion-item>
            <ion-select label="Tipo de Productor" label-placement="stacked" interface="action-sheet" placeholder="Seleccione una opciÃ³n"
                        [ngModel]="formData.tipo_productor"
                        (ngModelChange)="formData.tipo_productor = $event">
              <ion-select-option value="SOCIO">SOCIO</ion-select-option>
              <ion-select-option value="SOCIO-PARTICIPANTE">SOCIO-PARTICIPANTE</ion-select-option>
              <ion-select-option value="PARTICIPANTE">PARTICIPANTE</ion-select-option>
              <ion-select-option value="TRANSFERENCIA">TRANSFERENCIA</ion-select-option>
            </ion-select>
          </ion-item>

          <ion-item-divider>
            <ion-label>Fotos del DNI</ion-label>
          </ion-item-divider>

          <div class="dni-photo-grid">
            <!-- DNI Anverso -->
            <div class="dni-photo-container">
              <div class="photo-box" (click)="takeDniPhoto('front')">
                <img *ngIf="formData.dni_photo_front" [src]="getCapacitorFileSrc(formData.dni_photo_front)" alt="DNI Anverso" />
                <ion-icon *ngIf="!formData.dni_photo_front" name="camera-outline"></ion-icon>
                <ion-label *ngIf="!formData.dni_photo_front">Anverso</ion-label>
              </div>
              <ion-button *ngIf="formData.dni_photo_front" fill="clear" color="danger" size="small" class="delete-dni-btn" (click)="deleteDniPhoto('front', $event)">
                <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
              </ion-button>
            </div>
            <!-- DNI Reverso -->
            <div class="dni-photo-container">
              <div class="photo-box" (click)="takeDniPhoto('back')">
                <img *ngIf="formData.dni_photo_back" [src]="getCapacitorFileSrc(formData.dni_photo_back)" alt="DNI Reverso" />
                <ion-icon *ngIf="!formData.dni_photo_back" name="camera-outline"></ion-icon>
                <ion-label *ngIf="!formData.dni_photo_back">Reverso</ion-label>
              </div>
              <ion-button *ngIf="formData.dni_photo_back" fill="clear" color="danger" size="small" class="delete-dni-btn" (click)="deleteDniPhoto('back', $event)">
                <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
              </ion-button>
            </div>
          </div>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>